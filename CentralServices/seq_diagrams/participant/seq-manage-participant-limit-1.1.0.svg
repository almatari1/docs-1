<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1800px" preserveAspectRatio="none" style="width:1652px;height:1800px;" version="1.1" viewBox="0 0 1652 1800" width="1652px" zoomAndPan="magnify"><defs><filter height="300%" id="f9m0b28ozv8eg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="404" x="625" y="22.9951">2.06 Design an API to manage NET DEBIT CAP #330</text><rect fill="#FFFFE0" height="1754.7031" style="stroke: #A80036; stroke-width: 1.0;" width="718.5" x="873.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="1173.25" y="46.3638">Central Services</text><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="1551.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="87" y="126.5938"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="1505.8438" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="720" y="171.8594"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="1272.25" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="940" y="376.3203"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="135.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1297" y="420.5859"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1297" y="666.7813"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1297" y="1051.9063"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="77.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1535" y="449.7188"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1535" y="695.9141"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1535" y="1081.0391"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="1552.1094" style="stroke: #000000; stroke-width: 2.0;" width="1628" x="13" y="133.5938"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="1007.0547" style="stroke: #000000; stroke-width: 2.0;" width="1608" x="23" y="613.3828"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="526.8594" style="stroke: #000000; stroke-width: 2.0;" width="763.5" x="857.5" y="844.4453"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="311.8594" style="stroke: #000000; stroke-width: 2.0;" width="743.5" x="867.5" y="868.5781"/><rect fill="#FFFFFF" height="183.8672" style="stroke: none; stroke-width: 1.0;" width="763.5" x="857.5" y="1187.4375"/><rect fill="#FFFFFF" height="183.8672" style="stroke: none; stroke-width: 1.0;" width="1608" x="23" y="1436.5703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="92" x2="92" y1="116.5938" y2="1702.7031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="725" x2="725" y1="116.5938" y2="1702.7031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="944.5" x2="944.5" y1="116.5938" y2="1702.7031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1301.5" x2="1301.5" y1="116.5938" y2="1702.7031"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1540" x2="1540" y1="116.5938" y2="1702.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="33" y="113.292">HUB OPERATOR</text><ellipse cx="92" cy="43.2969" fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M92,51.2969 L92,78.2969 M79,59.2969 L105,59.2969 M92,78.2969 L79,93.2969 M92,78.2969 L105,93.2969 " fill="none" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="33" y="1714.6982">HUB OPERATOR</text><ellipse cx="92" cy="1728" fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M92,1736 L92,1763 M79,1744 L105,1744 M92,1763 L79,1778 M92,1763 L105,1778 " fill="none" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="658" y="113.292">Central Service API</text><path d="M704.5,72.2969 L704.5,96.2969 M704.5,84.2969 L721.5,84.2969 " fill="none" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="733.5" cy="84.2969" fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="658" y="1714.6982">Central Service API</text><path d="M704.5,1722 L704.5,1746 M704.5,1734 L721.5,1734 " fill="none" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="733.5" cy="1734" fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="877.5" y="113.292">Participant Handler</text><ellipse cx="945" cy="84.2969" fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="941,72.2969,947,67.2969,945,72.2969,947,77.2969,941,72.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="877.5" y="1714.6982">Participant Handler</text><ellipse cx="945" cy="1734" fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="941,1722,947,1717,945,1722,947,1727,941,1722" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1245.5" y="113.292">Participant DAO</text><ellipse cx="1302" cy="84.2969" fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1290" x2="1314" y1="98.2969" y2="98.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1245.5" y="1714.6982">Participant DAO</text><ellipse cx="1302" cy="1734" fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1290" x2="1314" y1="1748" y2="1748"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1492" y="113.292">Central Store</text><path d="M1522,64.2969 C1522,54.2969 1540,54.2969 1540,54.2969 C1540,54.2969 1558,54.2969 1558,64.2969 L1558,90.2969 C1558,100.2969 1540,100.2969 1540,100.2969 C1540,100.2969 1522,100.2969 1522,90.2969 L1522,64.2969 " fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1522,64.2969 C1522,74.2969 1540,74.2969 1540,74.2969 C1540,74.2969 1558,74.2969 1558,64.2969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1492" y="1714.6982">Central Store</text><path d="M1522,1728 C1522,1718 1540,1718 1540,1718 C1540,1718 1558,1718 1558,1728 L1558,1754 C1558,1764 1540,1764 1540,1764 C1540,1764 1522,1764 1522,1754 L1522,1728 " fill="#FEFECE" filter="url(#f9m0b28ozv8eg)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1522,1728 C1522,1738 1540,1738 1540,1738 C1540,1738 1558,1738 1558,1728 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="1551.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="87" y="126.5938"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="1505.8438" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="720" y="171.8594"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="1272.25" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="940" y="376.3203"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="135.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1297" y="420.5859"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1297" y="666.7813"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1297" y="1051.9063"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="77.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1535" y="449.7188"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1535" y="695.9141"/><rect fill="#FFFFFF" filter="url(#f9m0b28ozv8eg)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1535" y="1081.0391"/><path d="M13,133.5938 L227,133.5938 L227,140.5938 L217,150.5938 L13,150.5938 L13,133.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1552.1094" style="stroke: #000000; stroke-width: 2.0;" width="1628" x="13" y="133.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="28" y="146.6606">Manage Net Debit Cap</text><polygon fill="#A80036" points="708,167.8594,718,171.8594,708,175.8594,712,171.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97" x2="714" y1="171.8594" y2="171.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="104" y="166.7935">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="591" x="117" y="166.7935">Request to adjust ParticipantLimit for a certain Currency - POST - /participants/{name}/limits</text><path d="M102,184.8594 L102,345.8594 L280,345.8594 L280,194.8594 L270,184.8594 L102,184.8594 " fill="#FFFF00" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M270,184.8594 L270,194.8594 L280,194.8594 L270,184.8594 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="108" y="201.9263">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="108" y="217.0591">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="124" y="232.1919">payload: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="140" y="247.3247">currency: &lt;string&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="140" y="262.4575">limit: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="156" y="277.5903">type: &lt;string&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="156" y="292.7231">value: &lt;Id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="140" y="307.856">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="124" y="322.9888">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="108" y="338.1216">}</text><polygon fill="#A80036" points="928,372.3203,938,376.3203,928,380.3203,932,376.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="730" x2="934" y1="376.3203" y2="376.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="737" y="371.2544">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="750" y="371.2544">Adjust Limit for Participant</text><polygon fill="#A80036" points="1285,416.5859,1295,420.5859,1285,424.5859,1289,420.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="950" x2="1291" y1="420.5859" y2="420.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="957" y="407.9536">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="970" y="400.3872">Fetch Participant/currency</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="970" y="415.52">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1056" y="415.52">3200</text><polygon fill="#A80036" points="1523,445.7188,1533,449.7188,1523,453.7188,1527,449.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1307" x2="1529" y1="449.7188" y2="449.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1314" y="444.6528">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="1327" y="444.6528">Fetch Participant/currency</text><polygon fill="#FFFFE0" filter="url(#f9m0b28ozv8eg)" points="1475,462.7188,1604,462.7188,1614,481.7188,1604,500.7188,1475,500.7188,1465,481.7188,1475,462.7188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1477" y="478.7856">participant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1477" y="493.9185">participantCurrency</text><polygon fill="#A80036" points="1318,523.1172,1308,527.1172,1318,531.1172,1314,527.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1312" x2="1539" y1="527.1172" y2="527.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1324" y="522.0513">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="1337" y="522.0513">Retrieved Participant/currency</text><polygon fill="#A80036" points="961,552.25,951,556.25,961,560.25,957,556.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="955" x2="1301" y1="556.25" y2="556.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="967" y="551.1841">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="980" y="551.1841">Return Participant/currency</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="950" x2="992" y1="585.3828" y2="585.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="992" x2="992" y1="585.3828" y2="598.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="951" x2="992" y1="598.3828" y2="598.3828"/><polygon fill="#A80036" points="961,594.3828,951,598.3828,961,602.3828,957,598.3828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="957" y="580.3169">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="970" y="580.3169">Validate DFSP</text><path d="M23,613.3828 L87,613.3828 L87,620.3828 L77,630.3828 L23,630.3828 L23,613.3828 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1007.0547" style="stroke: #000000; stroke-width: 2.0;" width="1608" x="23" y="613.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="38" y="626.4497">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="202" x="102" y="625.5933">[Validate participant (success)]</text><polygon fill="#A80036" points="1285,662.7813,1295,666.7813,1285,670.7813,1289,666.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="950" x2="1291" y1="666.7813" y2="666.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="957" y="654.1489">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="298" x="970" y="646.5825">(for ParticipantCurrency) Fetch ParticipantLimit</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="970" y="661.7153">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1056" y="661.7153">3200</text><polygon fill="#A80036" points="1523,691.9141,1533,695.9141,1523,699.9141,1527,695.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1307" x2="1529" y1="695.9141" y2="695.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1314" y="690.8481">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="1327" y="690.8481">Fetch ParticipantLimit</text><polygon fill="#FFFFE0" filter="url(#f9m0b28ozv8eg)" points="1488,708.9141,1591,708.9141,1601,719.9141,1591,731.9141,1488,731.9141,1478,719.9141,1488,708.9141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1490" y="724.981">participantLimit</text><polygon fill="#A80036" points="1318,754.1797,1308,758.1797,1318,762.1797,1314,758.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1312" x2="1539" y1="758.1797" y2="758.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1324" y="753.1138">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="1346" y="753.1138">Retrieved ParticipantLimit</text><polygon fill="#A80036" points="961,783.3125,951,787.3125,961,791.3125,957,787.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="955" x2="1301" y1="787.3125" y2="787.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="967" y="782.2466">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="989" y="782.2466">Return ParticipantLimit</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="950" x2="992" y1="816.4453" y2="816.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="992" x2="992" y1="816.4453" y2="829.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="951" x2="992" y1="829.4453" y2="829.4453"/><polygon fill="#A80036" points="961,825.4453,951,829.4453,961,833.4453,957,829.4453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="957" y="811.3794">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="979" y="811.3794">Validate ParticipantLimit</text><path d="M857.5,844.4453 L921.5,844.4453 L921.5,851.4453 L911.5,861.4453 L857.5,861.4453 L857.5,844.4453 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="526.8594" style="stroke: #000000; stroke-width: 2.0;" width="763.5" x="857.5" y="844.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="872.5" y="857.5122">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="233" x="936.5" y="856.6558">[Validate participantLimit (success)]</text><path d="M867.5,868.5781 L1510.5,868.5781 L1510.5,875.5781 L1500.5,885.5781 L867.5,885.5781 L867.5,868.5781 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="311.8594" style="stroke: #000000; stroke-width: 2.0;" width="743.5" x="867.5" y="868.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="598" x="882.5" y="881.645">DB TRANSACTION IMPLEMENTATION - Lock on ParticipantLimit table with UPDATE</text><path d="M1307,890.7109 L1307,1005.7109 L1537,1005.7109 L1537,900.7109 L1527,890.7109 L1307,890.7109 " fill="#D3D3D3" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1527,890.7109 L1527,900.7109 L1537,900.7109 L1527,890.7109 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="1313" y="907.7778">If (record exists &amp;&amp; isActive = 1)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="1329" y="922.9106">oldIsActive.isActive = 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="1329" y="938.0435">insert Record</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1313" y="953.1763">Else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="1329" y="968.3091">insert Record</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="1313" y="983.4419">End</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1317" y="998.5747"/><polygon fill="#A80036" points="1285,1047.9063,1295,1051.9063,1285,1055.9063,1289,1051.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="950" x2="1291" y1="1051.9063" y2="1051.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="957" y="1039.2739">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="979" y="1031.7075">(for ParticipantLimit) Insert new ParticipantLimit</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="979" y="1046.8403">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1065" y="1046.8403">3200</text><polygon fill="#A80036" points="1523,1077.0391,1533,1081.0391,1523,1085.0391,1527,1081.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1307" x2="1529" y1="1081.0391" y2="1081.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1314" y="1075.9731">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1336" y="1075.9731">Insert ParticipantLimit</text><polygon fill="#FFFFE0" filter="url(#f9m0b28ozv8eg)" points="1488,1094.0391,1591,1094.0391,1601,1105.0391,1591,1117.0391,1488,1117.0391,1478,1105.0391,1488,1094.0391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="1490" y="1110.106">participantLimit</text><polygon fill="#A80036" points="1318,1139.3047,1308,1143.3047,1318,1147.3047,1314,1143.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1312" x2="1539" y1="1143.3047" y2="1143.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1324" y="1138.2388">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="1346" y="1138.2388">Inserted ParticipantLimit</text><polygon fill="#A80036" points="961,1168.4375,951,1172.4375,961,1176.4375,957,1172.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="955" x2="1301" y1="1172.4375" y2="1172.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="967" y="1167.3716">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="989" y="1167.3716">Return ParticipantLimit</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="857.5" x2="1621" y1="1188.4375" y2="1188.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="862.5" y="1198.6479">[Validate participantLimit (failure)]</text><path d="M955,1207.2422 L955,1232.2422 L1087,1232.2422 L1087,1217.2422 L1077,1207.2422 L955,1207.2422 " fill="#FF0000" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1077,1207.2422 L1077,1217.2422 L1087,1217.2422 L1077,1207.2422 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="961" y="1224.3091">Validation failure!</text><path d="M955,1246.375 L955,1361.375 L1328,1361.375 L1328,1256.375 L1318,1246.375 L955,1246.375 " fill="#FFFF00" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1318,1246.375 L1318,1256.375 L1328,1256.375 L1318,1246.375 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="961" y="1263.4419">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="977" y="1278.5747">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="993" y="1293.7075">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1009" y="1308.8403">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="1009" y="1323.9731">"errorDescription": "ParticipantLimit Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="993" y="1339.106">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="977" y="1354.2388">}</text><polygon fill="#A80036" points="741,1395.4375,731,1399.4375,741,1403.4375,737,1399.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="735" x2="939" y1="1399.4375" y2="1399.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="747" y="1394.3716">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="769" y="1394.3716">Return status 201</text><polygon fill="#A80036" points="108,1424.5703,98,1428.5703,108,1432.5703,104,1428.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102" x2="719" y1="1428.5703" y2="1428.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="114" y="1423.5044">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="136" y="1423.5044">Return status 201</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1631" y1="1437.5703" y2="1437.5703"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="28" y="1447.7808">[Validate participant (failure)]</text><path d="M955,1456.375 L955,1481.375 L1087,1481.375 L1087,1466.375 L1077,1456.375 L955,1456.375 " fill="#FF0000" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1077,1456.375 L1077,1466.375 L1087,1466.375 L1077,1456.375 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="961" y="1473.4419">Validation failure!</text><path d="M955,1495.5078 L955,1610.5078 L1268,1610.5078 L1268,1505.5078 L1258,1495.5078 L955,1495.5078 " fill="#FFFF00" filter="url(#f9m0b28ozv8eg)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1258,1495.5078 L1258,1505.5078 L1268,1505.5078 L1258,1495.5078 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="961" y="1512.5747">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="977" y="1527.7075">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="993" y="1542.8403">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1009" y="1557.9731">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="1009" y="1573.106">"errorDescription": "FSP id Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="993" y="1588.2388">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="977" y="1603.3716">}</text><polygon fill="#A80036" points="741,1644.5703,731,1648.5703,741,1652.5703,737,1648.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="735" x2="944" y1="1648.5703" y2="1648.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="747" y="1643.5044">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="769" y="1643.5044">Return</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="815" y="1643.5044">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="901" y="1643.5044">3200</text><polygon fill="#A80036" points="103,1673.7031,93,1677.7031,103,1681.7031,99,1677.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="97" x2="724" y1="1677.7031" y2="1677.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="109" y="1672.6372">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="131" y="1672.6372">Return</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="177" y="1672.6372">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="263" y="1672.6372">3200</text><!--
@startuml
title 2.06 Design an API to manage NET DEBIT CAP #330

autonumber

actor "HUB OPERATOR" as OPERATOR
boundary "Central Service API" as CSAPI
control "Participant Handler" as PARTICIPANT_HANDLER
entity "Central Service API" as CSAPI
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB

box "Central Services" #LightYellow
participant PARTICIPANT_HANDLER
participant PARTICIPANT_DAO
participant DB
end box


activate OPERATOR
group Manage Net Debit Cap
    OPERATOR -> CSAPI: Request to adjust ParticipantLimit for a certain Currency - POST - /participants/{name}/limits
    note right of OPERATOR #yellow
        Message:
        {
            payload: {
                currency: <string>,
                limit: {
                    type: <string>,
                    value: <Id>
                }
            }
        }
    end note

    activate CSAPI
    CSAPI -> PARTICIPANT_HANDLER: Adjust Limit for Participant
    activate PARTICIPANT_HANDLER
    PARTICIPANT_HANDLER ->PARTICIPANT_DAO: Fetch Participant/currency \n<color #FF0000><b>Error code:</b> 3200</color>
    activate PARTICIPANT_DAO
    PARTICIPANT_DAO -> DB: Fetch Participant/currency
    activate DB
    hnote over DB #lightyellow
        participant
        participantCurrency
    end note
    DB - -> PARTICIPANT_DAO: Retrieved Participant/currency
    deactivate DB
    PARTICIPANT_DAO - -> PARTICIPANT_HANDLER: Return Participant/currency
    deactivate PARTICIPANT_DAO
    PARTICIPANT_HANDLER -> PARTICIPANT_HANDLER: Validate DFSP
    alt Validate participant (success)
                PARTICIPANT_HANDLER ->PARTICIPANT_DAO:  (for ParticipantCurrency) Fetch ParticipantLimit \n<color #FF0000><b>Error code:</b> 3200</color>
                activate PARTICIPANT_DAO
                PARTICIPANT_DAO -> DB: Fetch ParticipantLimit
                activate DB
                hnote over DB #lightyellow
                    participantLimit
                end note
                DB - -> PARTICIPANT_DAO: Retrieved ParticipantLimit
                deactivate DB
                PARTICIPANT_DAO - -> PARTICIPANT_HANDLER: Return ParticipantLimit
                deactivate PARTICIPANT_DAO
                PARTICIPANT_HANDLER -> PARTICIPANT_HANDLER: Validate ParticipantLimit
                alt Validate participantLimit (success)
                    Group DB TRANSACTION IMPLEMENTATION - Lock on ParticipantLimit table with UPDATE
                    note right of PARTICIPANT_DAO #lightgrey
                        If (record exists && isActive = 1)
                            oldIsActive.isActive = 0
                            insert Record
                        Else
                            insert Record
                        End

                    end note

                    PARTICIPANT_HANDLER ->PARTICIPANT_DAO:  (for ParticipantLimit) Insert new ParticipantLimit \n<color #FF0000><b>Error code:</b> 3200</color>

                    activate PARTICIPANT_DAO

                    PARTICIPANT_DAO -> DB: Insert ParticipantLimit
                    activate DB
                    hnote over DB #lightyellow
                        participantLimit
                    end note
                    DB - -> PARTICIPANT_DAO: Inserted ParticipantLimit
                    deactivate DB
                    PARTICIPANT_DAO - -> PARTICIPANT_HANDLER: Return ParticipantLimit


                    deactivate PARTICIPANT_DAO
                End

         else Validate participantLimit (failure)
                    note right of PARTICIPANT_HANDLER #red: Validation failure!

                    note right of PARTICIPANT_HANDLER #yellow
                        Message:
                            {
                                "errorInformation": {
                                    "errorCode": 3200,
                                    "errorDescription": "ParticipantLimit Not Found",
                                }
                            }
                    end note
                end
            PARTICIPANT_HANDLER - -> CSAPI: Return status 201
            CSAPI - -> OPERATOR: Return status 201

    else Validate participant (failure)
        note right of PARTICIPANT_HANDLER #red: Validation failure!

        note right of PARTICIPANT_HANDLER #yellow
            Message:
                {
                    "errorInformation": {
                        "errorCode": 3200,
                        "errorDescription": "FSP id Not Found",
                    }
                }
        end note

    end
        PARTICIPANT_HANDLER - ->CSAPI: Return <color #FF0000><b>Error code:</b> 3200</color>
        deactivate PARTICIPANT_HANDLER
        CSAPI - ->OPERATOR: Return <color #FF0000><b>Error code:</b> 3200</color>

    deactivate PARTICIPANT_HANDLER
    deactivate CSAPI
    deactivate OPERATOR
end
@enduml

PlantUML version 1.2018.08(Sun Jun 24 12:31:00 UTC 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>