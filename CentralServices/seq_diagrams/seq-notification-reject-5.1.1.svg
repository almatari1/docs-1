<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="711.6px" preserveAspectRatio="none" style="width:810px;height:711px;" version="1.1" viewBox="0 0 810 711" width="810px" zoomAndPan="magnify"><defs><filter height="300%" id="fsfgrvqvoucpb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176.4" x="317.55" y="14.1211">5.1.1. Notification Handler for Rejections</text><rect fill="#D3D3D3" height="684.6117" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="111.6" x="2.4" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="4.2" y="28.234">Financial Service Providers</text><rect fill="#ADD8E6" height="684.6117" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="144.6" x="168" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.2" x="193.2" y="28.234">ML API Adapter Service</text><rect fill="#FFFFE0" height="684.6117" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="179.4" x="620.7" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60.6" x="680.1" y="28.234">Central Service</text><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="539.8535" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="237.3" y="98.2652"/><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="750.6" y="134.4516"/><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="530.8535" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="772.2" x="31.5" y="102.4652"/><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="416.3356" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="672" x="37.5" y="212.7832"/><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="44.959" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="498.9" x="164.4" y="227.3695"/><rect fill="#FFFFFF" height="147.8227" style="stroke: none; stroke-width: 0.6000000238418579;" width="672" x="37.5" y="481.2961"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="57.9" x2="57.9" y1="92.2652" y2="643.5188"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="240" x2="240" y1="92.2652" y2="643.5188"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="663.3" x2="663.3" y1="92.2652" y2="643.5188"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="753.3" x2="753.3" y1="92.2652" y2="643.5188"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="25.8" x="43.5" y="80.6004">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="22.2" x="45.3" y="90.4934">Payer</text><ellipse cx="58.2" cy="38.2793" fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M58.2,43.0793 L58.2,59.2793 M50.4,47.8793 L66,47.8793 M58.2,59.2793 L50.4,68.2793 M58.2,59.2793 L66,68.2793 " fill="none" filter="url(#fsfgrvqvoucpb)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="25.8" x="43.5" y="651.0399">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="22.2" x="45.3" y="660.9328">Payer</text><ellipse cx="58.2" cy="668.7047" fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M58.2,673.5047 L58.2,689.7047 M50.4,678.3047 L66,678.3047 M58.2,689.7047 L50.4,698.7047 M58.2,689.7047 L66,698.7047 " fill="none" filter="url(#fsfgrvqvoucpb)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="136.2" x="170.4" y="90.4934">ML API Notification Event Handler</text><ellipse cx="240.3" cy="72.7723" fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><polygon fill="#A80036" points="237.9,65.5723,241.5,62.5723,240.3,65.5723,241.5,68.5723,237.9,65.5723" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="136.2" x="170.4" y="651.0399">ML API Notification Event Handler</text><ellipse cx="240.3" cy="662.4117" fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><polygon fill="#A80036" points="237.9,655.2117,241.5,652.2117,240.3,655.2117,241.5,658.2117,237.9,655.2117" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="623.1" y="90.4934">Central Service API</text><path d="M651,65.5723 L651,79.9723 M651,72.7723 L661.2,72.7723 " fill="none" filter="url(#fsfgrvqvoucpb)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="668.4" cy="72.7723" fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="623.1" y="651.0399">Central Service API</text><path d="M651,655.2117 L651,669.6117 M651,662.4117 L661.2,662.4117 " fill="none" filter="url(#fsfgrvqvoucpb)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="668.4" cy="662.4117" fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><rect fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" height="18.293" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="711.9" y="68.5723"/><rect fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" height="18.293" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="709.5" y="70.9723"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="75" x="713.7" y="83.2934">Notification-Topic</text><rect fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" height="18.293" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="711.9" y="642.9188"/><rect fill="#FEFECE" filter="url(#fsfgrvqvoucpb)" height="18.293" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="709.5" y="645.3188"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="75" x="713.7" y="657.6399">Notification-Topic</text><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="539.8535" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="237.3" y="98.2652"/><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="750.6" y="134.4516"/><path d="M31.5,102.4652 L161.7,102.4652 L161.7,106.6652 L155.7,112.6652 L31.5,112.6652 L31.5,102.4652 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="530.8535" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="772.2" x="31.5" y="102.4652"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103.2" x="40.5" y="110.6063">DFSP Notified of Rejection</text><polygon fill="#A80036" points="743.4,132.0516,749.4,134.4516,743.4,136.8516,745.8,134.4516" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="243.3" x2="747" y1="134.4516" y2="134.4516"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="247.5" y="127.3857">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141" x="255.3" y="122.7926">Consume Notification event message</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="257.7" y="131.9789"/><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="257.7" y="131.9789">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="303.9" y="131.9789">2001</text><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="24.3727" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="534.3" x="168.6" y="157.6242"/><polygon fill="#EEEEEE" points="168.6,157.6242,207,157.6242,207,161.8242,201,167.8242,168.6,167.8242,168.6,157.6242" style="stroke: #000000; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="11.4" x="176.4" y="166.3652">ref</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="78.6" x="397.65" y="177.7652">Event Handler {9.1.0}</text><path d="M246,187.9969 L246,202.9969 L448.8,202.9969 L448.8,193.9969 L442.8,187.9969 L246,187.9969 " fill="#ADD8E6" filter="url(#fsfgrvqvoucpb)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M442.8,187.9969 L442.8,193.9969 L448.8,193.9969 L442.8,187.9969 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="190.2" x="249.6" y="198.5379">Update Event log upon consuming the notification</text><path d="M37.5,212.7832 L74.7,212.7832 L74.7,216.9832 L68.7,222.9832 L37.5,222.9832 L37.5,212.7832 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="416.3356" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="672" x="37.5" y="212.7832"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="46.5" y="220.9242">alt</text><path d="M164.4,227.3695 L249.6,227.3695 L249.6,231.5695 L243.6,237.5695 L164.4,237.5695 L164.4,227.3695 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="44.959" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="498.9" x="164.4" y="227.3695"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58.2" x="173.4" y="235.5106">Validate Event</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="243.3" x2="268.5" y1="259.7285" y2="259.7285"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="268.5" x2="268.5" y1="259.7285" y2="267.5285"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="243.9" x2="268.5" y1="267.5285" y2="267.5285"/><polygon fill="#A80036" points="249.9,265.1285,243.9,267.5285,249.9,269.9285,247.5,267.5285" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="247.5" y="252.29">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="398.4" x="255.3" y="247.6969">Validate event - Rule: type == 'notification' &amp;&amp; [action IN ['reject', 'timeout-received', 'timeout-reserved']]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="257.7" y="256.8832"/><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="257.7" y="256.8832">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="303.9" y="256.8832">2001</text><polygon fill="#A80036" points="656.1,295.7285,662.1,298.1285,656.1,300.5285,658.5,298.1285" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="243.3" x2="659.7" y1="298.1285" y2="298.1285"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="247.5" y="291.0627">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="135" x="255.3" y="286.4695">Request Participant Callback details</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="257.7" y="295.6559"/><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="257.7" y="295.6559">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="303.9" y="295.6559">3201</text><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="24.3727" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="534.3" x="168.6" y="303.3012"/><polygon fill="#EEEEEE" points="168.6,303.3012,207,303.3012,207,307.5012,201,313.5012,168.6,313.5012,168.6,303.3012" style="stroke: #000000; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="11.4" x="176.4" y="312.0422">ref</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="145.2" x="364.35" y="323.4422">Get Participant Callback Details {3.1.0}</text><polygon fill="#A80036" points="249.9,340.8738,243.9,343.2738,249.9,345.6738,247.5,343.2738" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="246.3" x2="662.7" y1="343.2738" y2="343.2738"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="253.5" y="340.6149">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="129.6" x="261.3" y="340.6149">Return Participant Callback details</text><path d="M246,351.2602 L246,449.0602 L431.4,449.0602 L431.4,357.2602 L425.4,351.2602 L246,351.2602 " fill="#FFFF00" filter="url(#fsfgrvqvoucpb)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M425.4,351.2602 L425.4,357.2602 L431.4,357.2602 L425.4,351.2602 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="249.6" y="361.8012">Message:</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="249.6" y="370.9875">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="259.2" y="380.1738">id: &lt;ID&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="154.8" x="259.2" y="389.3602">from: &lt;transferHeaders.FSPIOP-Source&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="163.2" x="259.2" y="398.5465">to: &lt;transferHeaders.FSPIOP-Destination&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="85.8" x="259.2" y="407.7328">type: application/json,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="36" x="259.2" y="416.9192">content: {</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="108" x="268.8" y="426.1055">payload: &lt;transferMessage&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="4.8" x="259.2" y="435.2918">},</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="249.6" y="444.4781">}</text><polygon fill="#A80036" points="64.8,473.7235,58.8,476.1235,64.8,478.5235,62.4,476.1235" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="61.2" x2="236.7" y1="476.1235" y2="476.1235"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="68.4" y="469.0576">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="100.2" x="76.2" y="464.4645">Send Callback Notification</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="78.6" y="473.6508"/><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="78.6" y="473.6508">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="67.2" x="124.8" y="473.6508">1000, 1001, 3002</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="37.5" x2="709.5" y1="481.8961" y2="481.8961"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="40.5" y="488.277">[Validate rule type != 'notification' / Error]</text><path d="M246,493.2692 L246,563.4692 L415.2,563.4692 L415.2,499.2692 L409.2,493.2692 L246,493.2692 " fill="#FFFF00" filter="url(#fsfgrvqvoucpb)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M409.2,493.2692 L409.2,499.2692 L415.2,499.2692 L409.2,493.2692 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="249.6" y="503.8102">Message:</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="249.6" y="512.9965">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="75.6" x="259.2" y="522.1828">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="99.6" x="268.8" y="531.3692">"errorCode": &lt;errorCode&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="137.4" x="268.8" y="540.5555">"errorDescription": &lt;ErrorMessage&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="259.2" y="549.7418">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="249.6" y="558.9281">}</text><rect fill="#FFFFFF" filter="url(#fsfgrvqvoucpb)" height="24.3727" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="534.3" x="168.6" y="568.9735"/><polygon fill="#EEEEEE" points="168.6,568.9735,207,568.9735,207,573.1735,201,579.1735,168.6,579.1735,168.6,568.9735" style="stroke: #000000; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="11.4" x="176.4" y="577.7145">ref</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="78.6" x="397.65" y="589.1145">Event Handler {9.1.0}</text><path d="M246,599.3461 L246,623.3461 L417,623.3461 L417,605.3461 L411,599.3461 L246,599.3461 " fill="#ADD8E6" filter="url(#fsfgrvqvoucpb)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M411,599.3461 L411,605.3461 L417,605.3461 L411,599.3461 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="79.8" x="249.6" y="609.8871">Log ERROR Messages</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="158.4" x="249.6" y="619.0735">Update Event log upon ERROR notification</text><!--
@startuml
title 5.1.1. Notification Handler for Rejections

autonumber


actor "DFSP1\nPayer" as DFSP1
control "ML API Notification Event Handler" as NOTIFY_HANDLER
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS

box "Financial Service Providers" #lightGray
	participant DFSP1
end box

box "ML API Adapter Service" #LightBlue
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant CSAPI
    participant TOPIC_NOTIFICATIONS
end box

activate NOTIFY_HANDLER

group DFSP Notified of Rejection
    NOTIFY_HANDLER -> TOPIC_NOTIFICATIONS: Consume Notification event message \n <color #FF0000><b>Error code:</b> 2001 </color>
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS
        ref over NOTIFY_HANDLER, CSAPI: Event Handler {9.1.0}
        note right of NOTIFY_HANDLER #lightblue
            Update Event log upon consuming the notification
        end note

        alt
        group Validate Event
            NOTIFY_HANDLER <-> NOTIFY_HANDLER: Validate event - Rule: type == 'notification' && [action IN ['reject', 'timeout-received', 'timeout-reserved']] \n <color #FF0000><b>Error code:</b> 2001 </color>
        end
        NOTIFY_HANDLER -> CSAPI: Request Participant Callback details \n <color #FF0000><b>Error code:</b> 3201 </color>
        ref over NOTIFY_HANDLER, CSAPI: Get Participant Callback Details {3.1.0}
        NOTIFY_HANDLER <- - CSAPI: Return Participant Callback details
        note right of NOTIFY_HANDLER #yellow
            Message:
            {
                id: <ID>,
                from: <transferHeaders.FSPIOP-Source>,
                to: <transferHeaders.FSPIOP-Destination>,
                type: application/json,
                content: {
                    payload: <transferMessage>
                },
            }
        end note

        NOTIFY_HANDLER - -> DFSP1: Send Callback Notification \n <color #FF0000><b>Error code:</b> 1000, 1001, 3002 </color>
    else Validate rule type != 'notification' / Error
        note right of NOTIFY_HANDLER #yellow
            Message:
            {
                "errorInformation": {
                    "errorCode": <errorCode>,
                    "errorDescription": <ErrorMessage>,
                }
            }
        end note
        ref over NOTIFY_HANDLER, CSAPI: Event Handler {9.1.0}
        note right of NOTIFY_HANDLER #lightblue
            Log ERROR Messages
            Update Event log upon ERROR notification
        end note
    end
end
deactivate TOPIC_NOTIFICATIONS

@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>