<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1291px" preserveAspectRatio="none" style="width:1860px;height:1291px;" version="1.1" viewBox="0 0 1860 1291" width="1860px" zoomAndPan="magnify"><defs><filter height="300%" id="fxukvo4inm4e0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="837.5" y="22.9951">2.3.0. Transfer Timeout</text><rect fill="#D3D3D3" height="1246.2422" style="stroke: #A80036; stroke-width: 1.0;" width="204" x="4" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="198" x="7" y="46.3638">Financial Service Providers</text><rect fill="#ADD8E6" height="1246.2422" style="stroke: #A80036; stroke-width: 1.0;" width="356" x="210" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="301.5" y="46.3638">ML API Adapter Service</text><rect fill="#FFFFE0" height="1246.2422" style="stroke: #A80036; stroke-width: 1.0;" width="1255" x="568" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="1140" y="46.3638">Central Service</text><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="1004.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="442" y="163.0234"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="1004.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="657.5" y="163.0234"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="1004.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1258.5" y="163.0234"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="1004.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1581.5" y="163.0234"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="990.9219" style="stroke: #000000; stroke-width: 2.0;" width="1830" x="19" y="170.0234"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="1267" x="562" y="279.5547"/><rect fill="#FFFFFF" height="31.1328" style="stroke: none; stroke-width: 1.0;" width="1267" x="562" y="325.8203"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="782.9922" style="stroke: #000000; stroke-width: 2.0;" width="1810" x="29" y="370.9531"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="131.6641" style="stroke: #000000; stroke-width: 2.0;" width="1790" x="39" y="736.5469"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="131.6641" style="stroke: #000000; stroke-width: 2.0;" width="1728" x="101" y="936.3438"/><rect fill="#FFFFFF" height="53.9375" style="stroke: none; stroke-width: 1.0;" width="1810" x="29" y="1100.0078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="75" x2="75" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="137" x2="137" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="268" x2="268" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="447" x2="447" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="662" x2="662" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="911" x2="911" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1121" x2="1121" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1263" x2="1263" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1420.5" x2="1420.5" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1586" x2="1586" y1="153.0234" y2="1177.9453"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1748" x2="1748" y1="153.0234" y2="1177.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="49" y="133.4248">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="53" y="149.7217">Payer</text><ellipse cx="75" cy="63.4297" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M75,71.4297 L75,98.4297 M62,79.4297 L88,79.4297 M75,98.4297 L62,113.4297 M75,98.4297 L88,113.4297 " fill="none" filter="url(#fxukvo4inm4e0)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="49" y="1189.9404">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="53" y="1206.2373">Payer</text><ellipse cx="75" cy="1219.5391" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M75,1227.5391 L75,1254.5391 M62,1235.5391 L88,1235.5391 M75,1254.5391 L62,1269.5391 M75,1254.5391 L88,1269.5391 " fill="none" filter="url(#fxukvo4inm4e0)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="111" y="133.4248">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="113" y="149.7217">Payee</text><ellipse cx="137" cy="63.4297" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M137,71.4297 L137,98.4297 M124,79.4297 L150,79.4297 M137,98.4297 L124,113.4297 M137,98.4297 L150,113.4297 " fill="none" filter="url(#fxukvo4inm4e0)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="111" y="1189.9404">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="113" y="1206.2373">Payee</text><ellipse cx="137" cy="1219.5391" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M137,1227.5391 L137,1254.5391 M124,1235.5391 L150,1235.5391 M137,1254.5391 L124,1269.5391 M137,1254.5391 L150,1269.5391 " fill="none" filter="url(#fxukvo4inm4e0)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="214" y="149.7217">ML API Adapter</text><path d="M247.5,108.7266 L247.5,132.7266 M247.5,120.7266 L264.5,120.7266 " fill="none" filter="url(#fxukvo4inm4e0)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="276.5" cy="120.7266" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="214" y="1189.9404">ML API Adapter</text><path d="M247.5,1197.2422 L247.5,1221.2422 M247.5,1209.2422 L264.5,1209.2422 " fill="none" filter="url(#fxukvo4inm4e0)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="276.5" cy="1209.2422" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="224" x="332" y="149.7217">ML API Notification Event Handler</text><ellipse cx="447" cy="120.7266" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="443,108.7266,449,103.7266,447,108.7266,449,113.7266,443,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="224" x="332" y="1189.9404">ML API Notification Event Handler</text><ellipse cx="447" cy="1209.2422" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="443,1197.2422,449,1192.2422,447,1197.2422,449,1202.2422,443,1197.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="572" y="149.7217">Transfer Timeout Handler</text><ellipse cx="662.5" cy="120.7266" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="658.5,108.7266,664.5,103.7266,662.5,108.7266,664.5,113.7266,658.5,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="572" y="1189.9404">Transfer Timeout Handler</text><ellipse cx="662.5" cy="1209.2422" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="658.5,1197.2422,664.5,1192.2422,662.5,1197.2422,664.5,1202.2422,658.5,1197.2422" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="288" x="767" y="113.7266"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="288" x="763" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="274" x="770" y="137.7217">Topic-{currency}-DFSPn-Position-Abort</text><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="288" x="767" y="1176.9453"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="288" x="763" y="1180.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="274" x="770" y="1200.9404">Topic-{currency}-DFSPn-Position-Abort</text><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1073" y="113.7266"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1069" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1076" y="137.7217">Event-Topic</text><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1073" y="1176.9453"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1069" y="1180.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1076" y="1200.9404">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="1183" y="149.7217">Position Event Handler</text><ellipse cx="1263.5" cy="120.7266" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1259.5,108.7266,1265.5,103.7266,1263.5,108.7266,1265.5,113.7266,1259.5,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="1183" y="1189.9404">Position Event Handler</text><ellipse cx="1263.5" cy="1209.2422" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1259.5,1197.2422,1265.5,1192.2422,1263.5,1197.2422,1265.5,1202.2422,1259.5,1197.2422" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1363.5" y="113.7266"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1359.5" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="1366.5" y="137.7217">Transfer-Topic</text><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1363.5" y="1176.9453"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="1359.5" y="1180.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="1366.5" y="1200.9404">Transfer-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1505" y="149.7217">Transfer Event Handler</text><ellipse cx="1586.5" cy="120.7266" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1582.5,108.7266,1588.5,103.7266,1586.5,108.7266,1588.5,113.7266,1582.5,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1505" y="1189.9404">Transfer Event Handler</text><ellipse cx="1586.5" cy="1209.2422" fill="#FEFECE" filter="url(#fxukvo4inm4e0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1582.5,1197.2422,1588.5,1192.2422,1586.5,1197.2422,1588.5,1202.2422,1582.5,1197.2422" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="1682" y="113.7266"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="1678" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1685" y="137.7217">Notification-Topic</text><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="1682" y="1176.9453"/><rect fill="#FEFECE" filter="url(#fxukvo4inm4e0)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="1678" y="1180.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1685" y="1200.9404">Notification-Topic</text><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="1004.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="442" y="163.0234"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="1004.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="657.5" y="163.0234"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="1004.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1258.5" y="163.0234"/><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="1004.9219" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1581.5" y="163.0234"/><path d="M19,170.0234 L175,170.0234 L175,177.0234 L165,187.0234 L19,187.0234 L19,170.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="990.9219" style="stroke: #000000; stroke-width: 2.0;" width="1830" x="19" y="170.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="34" y="183.0903">Transfer Expiry</text><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="603" x="569" y="212.1563"/><polygon fill="#EEEEEE" points="569,212.1563,635,212.1563,635,219.1563,625,229.1563,569,229.1563,569,212.1563" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="582" y="226.2231">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="757" y="245.2231">Timeout Handler Consume {2.3.1.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="761" y="260.356"/><path d="M562,279.5547 L626,279.5547 L626,286.5547 L616,296.5547 L562,296.5547 L562,279.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="1267" x="562" y="279.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="577" y="292.6216">alt</text><polygon fill="#A80036" points="1736.5,313.8203,1746.5,317.8203,1736.5,321.8203,1740.5,317.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="667.5" x2="1742.5" y1="317.8203" y2="317.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="674.5" y="312.7544">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="687.5" y="312.7544">Produce message</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="562" x2="1829" y1="326.8203" y2="326.8203"/><polygon fill="#A80036" points="899,344.9531,909,348.9531,899,352.9531,903,348.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="667.5" x2="905" y1="348.9531" y2="348.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="674.5" y="343.8872">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="687.5" y="343.8872">Produce message</text><path d="M29,370.9531 L93,370.9531 L93,377.9531 L83,387.9531 L29,387.9531 L29,370.9531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="782.9922" style="stroke: #000000; stroke-width: 2.0;" width="1810" x="29" y="370.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="44" y="384.02">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="108" y="383.1636">[Consume Single Message]</text><polygon fill="#A80036" points="922,430.2188,912,434.2188,922,438.2188,918,434.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="916" x2="1257.5" y1="434.2188" y2="434.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="928" y="429.1528">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="941" y="429.1528">Consume message</text><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="720.5" x="760" y="442.2188"/><polygon fill="#EEEEEE" points="760,442.2188,826,442.2188,826,449.2188,816,459.2188,760,459.2188,760,442.2188" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="773" y="456.2856">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="976.25" y="475.2856">Position Hander Consume (Timeout) {2.3.2.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="980.25" y="490.4185"/><polygon fill="#A80036" points="1408.5,519.75,1418.5,523.75,1408.5,527.75,1412.5,523.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1268.5" x2="1414.5" y1="523.75" y2="523.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1275.5" y="518.6841">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1288.5" y="518.6841">Produce message</text><polygon fill="#A80036" points="1431.5,573.8828,1421.5,577.8828,1431.5,581.8828,1427.5,577.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1425.5" x2="1580.5" y1="577.8828" y2="577.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1437.5" y="572.8169">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1450.5" y="572.8169">Consume message</text><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="752" x="1066" y="585.8828"/><polygon fill="#EEEEEE" points="1066,585.8828,1132,585.8828,1132,592.8828,1122,602.8828,1066,602.8828,1066,585.8828" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="1079" y="599.9497">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="1295.5" y="618.9497">Transfer Handler Consume (Timeout) {2.3.3.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1299.5" y="634.0825"/><polygon fill="#A80036" points="1736.5,663.4141,1746.5,667.4141,1736.5,671.4141,1740.5,667.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1591.5" x2="1742.5" y1="667.4141" y2="667.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1598.5" y="662.3481">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="1611.5" y="662.3481">Produce message</text><polygon fill="#A80036" points="1736.5,717.5469,1746.5,721.5469,1736.5,725.5469,1740.5,721.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="452" x2="1742.5" y1="721.5469" y2="721.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="459" y="716.481">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="472" y="716.481">Consume message</text><path d="M39,736.5469 L109,736.5469 L109,743.5469 L99,753.5469 L39,753.5469 L39,736.5469 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="131.6641" style="stroke: #000000; stroke-width: 2.0;" width="1790" x="39" y="736.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="54" y="749.6138">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="320" x="124" y="748.7573">[action IN ['timeout-received', 'timeout-reserved']]</text><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="1772" x="46" y="778.6797"/><polygon fill="#EEEEEE" points="46,778.6797,112,778.6797,112,785.6797,102,795.6797,46,795.6797,46,778.6797" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="59" y="792.7466">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="781" y="811.7466">Send notification to Participant (Payer) {1.1.4.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="785" y="826.8794"/><polygon fill="#A80036" points="86,856.2109,76,860.2109,86,864.2109,82,860.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="441" y1="860.2109" y2="860.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="92" y="855.145">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="105" y="855.145">Send callback notification</text><polygon fill="#A80036" points="1736.5,917.3438,1746.5,921.3438,1736.5,925.3438,1740.5,921.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="452" x2="1742.5" y1="921.3438" y2="921.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="459" y="916.2778">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="472" y="916.2778">Consume message</text><path d="M101,936.3438 L171,936.3438 L171,943.3438 L161,953.3438 L101,953.3438 L101,936.3438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="131.6641" style="stroke: #000000; stroke-width: 2.0;" width="1728" x="101" y="936.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="116" y="949.4106">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="186" y="948.5542">[action == 'timeout-reserved']</text><rect fill="#FFFFFF" filter="url(#fxukvo4inm4e0)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="1710" x="108" y="978.4766"/><polygon fill="#EEEEEE" points="108,978.4766,174,978.4766,174,985.4766,164,995.4766,108,995.4766,108,978.4766" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="121" y="992.5435">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="810.5" y="1011.5435">Send notification to Participant (Payee) {1.1.4.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="814.5" y="1026.6763"/><polygon fill="#A80036" points="148,1056.0078,138,1060.0078,148,1064.0078,144,1060.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="142" x2="441" y1="1060.0078" y2="1060.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="154" y="1054.9419">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="176" y="1054.9419">Send callback notification</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="29" x2="1839" y1="1101.0078" y2="1101.0078"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="34" y="1111.2183">[Consume Batch Messages]</text><path d="M1034,1119.8125 L1034,1144.8125 L1249,1144.8125 L1249,1129.8125 L1239,1119.8125 L1034,1119.8125 " fill="#ADD8E6" filter="url(#fxukvo4inm4e0)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1239,1119.8125 L1239,1129.8125 L1249,1129.8125 L1239,1119.8125 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="1040" y="1136.8794">To be delivered by future story</text><!--
@startuml
title 2.3.0. Transfer Timeout

autonumber


actor "DFSP1\nPayer" as DFSP1
actor "DFSP2\nPayee" as DFSP2
boundary "ML API Adapter" as MLAPI
control "ML API Notification Event Handler" as NOTIFY_HANDLER
control "Transfer Timeout Handler" as EXP_HANDLER
collections "Topic-{currency}-DFSPn-Position-Abort" as TOPIC_POSITION_DFSP
control "Position Event Handler" as POS_HANDLER
collections "Transfer-Topic" as TOPIC_TRANSFERS
control "Transfer Event Handler" as TRANS_HANDLER
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENT

box "Financial Service Providers" #lightGray
	participant DFSP1
	participant DFSP2
end box

box "ML API Adapter Service" #LightBlue
	participant MLAPI
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant EXP_HANDLER
    participant TOPIC_POSITION_DFSP
    participant TOPIC_EVENT
    participant POS_HANDLER
    participant TOPIC_TRANSFERS
    participant TRANS_HANDLER
    participant TOPIC_NOTIFICATIONS
end box

activate NOTIFY_HANDLER
activate EXP_HANDLER
activate POS_HANDLER
activate TRANS_HANDLER
group Transfer Expiry
    |||
    ref over EXP_HANDLER, TOPIC_EVENT :  Timeout Handler Consume {2.3.1.} \n
    alt
        EXP_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
    else
        EXP_HANDLER -> TOPIC_POSITION_DFSP: Produce message
    end
    
    alt Consume Single Message
        |||
        TOPIC_POSITION_DFSP <- POS_HANDLER: Consume message
        ref over TOPIC_POSITION_DFSP, TOPIC_TRANSFERS :  Position Hander Consume (Timeout) {2.3.2.} \n
        POS_HANDLER -> TOPIC_TRANSFERS: Produce message
        |||
        TOPIC_TRANSFERS <- TRANS_HANDLER: Consume message
        ref over TOPIC_EVENT, TOPIC_NOTIFICATIONS : Transfer Handler Consume (Timeout) {2.3.3.} \n
        TRANS_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        opt action IN ['timeout-received', 'timeout-reserved']
            |||
            ref over DFSP1, TOPIC_NOTIFICATIONS : Send notification to Participant (Payer) {1.1.4.} \n
            NOTIFY_HANDLER -> DFSP1: Send callback notification
        end
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume message
        opt action == 'timeout-reserved'
            |||
            ref over DFSP2, TOPIC_NOTIFICATIONS : Send notification to Participant (Payee) {1.1.4.} \n
            NOTIFY_HANDLER -> DFSP2: Send callback notification
        end
        |||
    else Consume Batch Messages
        note left of POS_HANDLER #lightblue
            To be delivered by future story
        end note
    end
end
deactivate TRANS_HANDLER
deactivate POS_HANDLER
deactivate EXP_HANDLER
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.10beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>